import{j as s}from"./jsx-runtime-PRZyEUFp.js";import{z as h,r as d,p,A as f,L as g}from"./chunk-OIYGIGL5-8fxVktC9.js";function x(e){const i=new Date().getTime()-e.getTime(),n=Math.floor(i/1e3),t=Math.floor(n/60),a=Math.floor(t/60);if(Math.floor(a/24)<1)return n<60?n===1?"1 second ago":`${n} seconds ago`:t<60?t===1?"1 minute ago":`${t} minutes ago`:a===1?"1 hour ago":`${a} hours ago`;const c={year:"numeric",month:"short",day:"numeric"};return e.toLocaleDateString("en-US",c)}function k(e){const o={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"2-digit"};return e.toLocaleDateString("en-US",o)}function j({tweetId:e,initialLikeCount:o,initialIsLiked:i}){const n=h(),[t,a]=d.useState(i),[r,c]=d.useState(o);d.useEffect(()=>{a(i),c(o)},[i,o]);const l=n.state==="submitting",u=m=>{m.stopPropagation(),l||(a(!t),c(t?r-1:r+1))};return s.jsxs(p,{method:"post",action:`/tweets/${e}/like`,onClick:u,children:[s.jsx("input",{type:"hidden",name:"tweetId",value:e}),s.jsx("input",{type:"hidden",name:"action",value:t?"unlike":"like"}),s.jsxs("button",{type:"submit",disabled:l,className:`flex items-center space-x-2 px-3 py-1.5 rounded-full transition-all ${t?"text-red-600 hover:bg-red-50":"text-gray-600 hover:bg-gray-100"} ${l?"opacity-50 cursor-not-allowed":""}`,"aria-label":t?"Unlike tweet":"Like tweet",children:[s.jsx("svg",{className:`w-5 h-5 ${t?"fill-current":"stroke-current fill-none"}`,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:s.jsx("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"})}),s.jsx("span",{className:"text-sm font-medium",children:r})]})]})}function v({tweet:e}){const o=f(),i=()=>{o(`/tweets/${e.id}`)},n=t=>{t.stopPropagation()};return s.jsxs("article",{className:"bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow cursor-pointer",onClick:i,children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs(g,{to:`/profile/${e.author.username}`,className:"font-semibold text-gray-900 hover:text-blue-600 hover:underline",onClick:n,"aria-label":`View ${e.author.username}'s profile`,children:["@",e.author.username]}),s.jsx("time",{dateTime:e.createdAt.toISOString(),title:k(e.createdAt),className:"text-sm text-gray-500",children:x(e.createdAt)})]}),s.jsx("p",{className:"text-gray-800 text-base whitespace-pre-wrap break-words mb-3",children:e.content}),s.jsx("div",{className:"flex items-center",onClick:t=>t.stopPropagation(),children:s.jsx(j,{tweetId:e.id,initialLikeCount:e.likeCount,initialIsLiked:e.isLikedByUser})})]})}export{v as T};
